{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@yippy/auth-ldap/webpack/bootstrap","webpack://@yippy/auth-ldap/webpack/runtime/compat get default export","webpack://@yippy/auth-ldap/webpack/runtime/define property getters","webpack://@yippy/auth-ldap/webpack/runtime/hasOwnProperty shorthand","webpack://@yippy/auth-ldap/external root \"flarum.core.compat['common/extend']\"","webpack://@yippy/auth-ldap/external root \"flarum.core.compat['common/app']\"","webpack://@yippy/auth-ldap/external root \"flarum.core.compat['components/HeaderSecondary']\"","webpack://@yippy/auth-ldap/external root \"flarum.core.compat['components/SettingsPage']\"","webpack://@yippy/auth-ldap/external root \"flarum.core.compat['components/Button']\"","webpack://@yippy/auth-ldap/external root \"flarum.core.compat['components/LogInModal']\"","webpack://@yippy/auth-ldap/external root \"flarum.core.compat['components/SignUpModal']\"","webpack://@yippy/auth-ldap/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@yippy/auth-ldap/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@yippy/auth-ldap/external root \"flarum.core.compat['extend']\"","webpack://@yippy/auth-ldap/external root \"flarum.core.compat['app']\"","webpack://@yippy/auth-ldap/external root \"flarum.core.compat['components/Modal']\"","webpack://@yippy/auth-ldap/external root \"flarum.core.compat['components/LogInButtons']\"","webpack://@yippy/auth-ldap/external root \"flarum.core.compat['utils/extractText']\"","webpack://@yippy/auth-ldap/external root \"flarum.core.compat['utils/ItemList']\"","webpack://@yippy/auth-ldap/external root \"flarum.core.compat['utils/Stream']\"","webpack://@yippy/auth-ldap/./src/forum/components/LDAPLogInModal.js","webpack://@yippy/auth-ldap/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@yippy/auth-ldap/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/HeaderSecondary'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/SettingsPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/LogInModal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/SignUpModal'];","function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/LogInButtons'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/extractText'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/Stream'];","import { extend } from 'flarum/extend';\r\nimport app from 'flarum/app';\r\n\r\nimport Modal from 'flarum/components/Modal';\r\nimport Button from 'flarum/components/Button';\r\nimport LogInButtons from 'flarum/components/LogInButtons';\r\nimport extractText from 'flarum/utils/extractText';\r\nimport ItemList from 'flarum/utils/ItemList';\r\nimport Stream from 'flarum/utils/Stream';\r\n\r\nconst translationPrefix = 'yippy-auth-ldap.forum.';\r\nconst translationErrorsPrefix = 'yippy-auth-ldap.forum.errors.';\r\n\r\nexport default class LDAPLogInModal extends Modal {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n\r\n    /**\r\n     * The value of the identification input.\r\n     *\r\n     * @type {Function}\r\n     */\r\n    this.identification = Stream(this.attrs.identification || '');\r\n\r\n    /**\r\n     * The value of the password input.\r\n     *\r\n     * @type {Function}\r\n     */\r\n    this.password = Stream(this.attrs.password || '');\r\n\r\n    /**\r\n     * The value of the remember me input.\r\n     *\r\n     * @type {Function}\r\n     */\r\n    this.remember = Stream(!!this.attrs.remember);\r\n  }\r\n\r\n  className() {\r\n    return 'LogInModal Modal--small';\r\n  }\r\n\r\n  title() {\r\n    return app.translator.trans(translationPrefix + 'log_in_with', {server: app.forum.attribute('yippy-auth-ldap.method_name')});\r\n  }\r\n\r\n  content() {\r\n    return [\r\n      <div className=\"Modal-body\">\r\n        {this.body()}\r\n      </div>,\r\n      <div className=\"Modal-footer\">\r\n        {this.footer()}\r\n      </div>\r\n    ];\r\n  }\r\n\r\n  body() {\r\n    return [\r\n      //<LogInButtons/>,\r\n\r\n      <div className=\"Form Form--centered\">\r\n        {this.fields().toArray()}\r\n      </div>\r\n    ];\r\n  }\r\n\r\n  fields() {\r\n    const items = new ItemList();\r\n\r\n    const idLabel = app.translator.trans('core.forum.log_in.username_or_email_placeholder');\r\n    const passwordLabel = app.translator.trans('core.forum.log_in.password_placeholder');\r\n\r\n    items.add('identification', <div className=\"Form-group\">\r\n    {idLabel}\r\n      <input className=\"FormControl\" name=\"identification\" type=\"text\" placeholder={idLabel}\r\n        bidi={this.identification}\r\n        disabled={this.attrs.loading} />\r\n    </div>, 30);\r\n\r\n    items.add('password', <div className=\"Form-group\">\r\n    {passwordLabel}\r\n      <input className=\"FormControl\" name=\"password\" type=\"password\" placeholder={passwordLabel}\r\n        bidi={this.password}\r\n        disabled={this.attrs.loading} />\r\n    </div>, 20);\r\n\r\n    /*items.add('remember', <div className=\"Form-group\">\r\n      <div>\r\n        <label className=\"checkbox\">\r\n          <input type=\"checkbox\" bidi={this.remember} disabled={this.loading} />\r\n          {app.translator.trans('core.forum.log_in.remember_me_label')}\r\n        </label>\r\n      </div>\r\n    </div>, 10);*/\r\n\r\n    items.add('submit', <div className=\"Form-group\">\r\n      {Button.component(\r\n        {\r\n          className: 'Button Button--primary Button--block',\r\n          name: 'submit_log_in',\r\n          type: 'submit',\r\n          loading: this.attrs.loading,\r\n        },\r\n        app.translator.trans('core.forum.log_in.submit_button')\r\n      )}\r\n    </div>, -10);\r\n\r\n    return items;\r\n  }\r\n\r\n  footer() {\r\n    return [\r\n      /*<p className=\"LogInModal-forgotPassword\">\r\n        <a onclick={this.forgotPassword.bind(this)}>{app.translator.trans('core.forum.log_in.forgot_password_link')}</a>\r\n      </p>,\r\n\r\n      app.forum.attribute('allowSignUp') ? (\r\n        <p className=\"LogInModal-signUp\">\r\n          {app.translator.trans('core.forum.log_in.sign_up_text', {a: <a onclick={this.signUp.bind(this)}/>})}\r\n        </p>\r\n      ) : ''*/\r\n    ];\r\n  }\r\n\r\n  onready() {\r\n    this.$('[name=' + (this.identification() ? 'password' : 'identification') + ']').select();\r\n  }\r\n\r\n  /**\r\n   * Attempt to log in a user to LDAP\r\n   */\r\n  login(body, options = {}) {\r\n    return app.request({\r\n      method: 'POST',\r\n      url: app.forum.attribute('baseUrl') + '/auth/ldap',\r\n      body,\r\n      ...options,\r\n    });\r\n  }\r\n \r\n  onsubmit(e) {\r\n    e.preventDefault();\r\n\r\n    this.loading = true;\r\n    $('input[name=\"identification\"]').prop(\"disabled\", true );\r\n    $('input[name=\"password\"]').prop(\"disabled\", true );\r\n    $('button[name=\"submit_log_in\"]').prop(\"disabled\", true );\r\n\r\n    const identification = this.identification();\r\n    const password = this.password();\r\n    const remember = this.remember();\r\n    const csrfToken = app.session.csrfToken;\r\n    const data = {\r\n      identification,\r\n      password,\r\n      remember,\r\n      csrfToken\r\n    };\r\n    const options = {\r\n      errorHandler: this.onerror.bind(this),\r\n      modifyText: this.modifyResponse.bind(this),\r\n    };\r\n    this.login(\r\n      data,\r\n      options\r\n    ).catch(() => {});\r\n  }\r\n\r\n  /*\r\n   * To ensure the request on complete will re-enable elements on the login popup or enable the sign up modal depending on the response condition.\r\n   */\r\n  modifyResponse(response) {\r\n    $('input[name=\"identification\"]').prop(\"disabled\", false );\r\n    $('input[name=\"password\"]').prop(\"disabled\", false );\r\n    $('button[name=\"submit_log_in\"]').prop(\"disabled\", false );\r\n\r\n    if (response.indexOf('app.authenticationComplete') >= 0) {\r\n      response.replace( /(^.*\\{|\\}.*$)/g, '' );\r\n      var matches = response.match(/[^{\\}]+(?=})/g);\r\n      if (matches.length > 0) {\r\n        app.authenticationComplete(JSON.parse(\"{\"+matches[0]+\"}\"));\r\n      }\r\n    } else if (response.indexOf(app.translator.trans(translationErrorsPrefix+'core_csrf_token_mismatch')) >= 0) {\r\n      // Identify the default csrf_token_mismatch response that is sent in html. Oddly this does not prompt onerror method, will manually invoke onerror method.\r\n      this.onerror({\r\n        alert: {\r\n          content: app.translator.trans(translationErrorsPrefix + 'csrf_token_mismatch'),\r\n          controls: false,\r\n          dismissible: false,\r\n          type: \"error\"\r\n        },\r\n        status: 400,\r\n        response: {\r\n          errors: [{\r\n            code: 'csrf_token_mismatch',\r\n            status: 400\r\n          }]\r\n        }\r\n      });\r\n    }\r\n    this.loaded();\r\n    return response;\r\n  }\r\n\r\n  onerror(error) {\r\n    var code_error = null;\r\n    if (error.response.errors && error.response.errors.length > 0) {\r\n      code_error = error.response.errors[0].code;\r\n    }\r\n    if (error.status === 401) {\r\n      switch(code_error) {\r\n        case 'search_filter_is_invalid':\r\n          error.alert.content = app.translator.trans(translationErrorsPrefix + code_error, {server: app.forum.attribute('yippy-auth-ldap.method_name')});\r\n          break;\r\n        case 'not_authenticated':\r\n          error.alert.content = app.translator.trans(translationErrorsPrefix + code_error, {server: app.forum.attribute('yippy-auth-ldap.method_name')});\r\n          break;\r\n        case 'account.invalid_inputs':\r\n          error.alert.content = app.translator.trans(translationErrorsPrefix + code_error);\r\n          break;\r\n        case 'account.not_found':\r\n          error.alert.content = app.translator.trans(translationErrorsPrefix + code_error, {server: app.forum.attribute('yippy-auth-ldap.method_name')});\r\n          break;\r\n        case 'account.incorrect_details':\r\n          error.alert.content = app.translator.trans(translationErrorsPrefix + code_error);\r\n          break;\r\n        case 'account.password_expired':\r\n          error.alert.content = app.translator.trans(translationErrorsPrefix + code_error);\r\n          break;\r\n        case 'account.disabled':\r\n          error.alert.content = app.translator.trans(translationErrorsPrefix + code_error, {server: app.forum.attribute('yippy-auth-ldap.method_name')});\r\n          break;\r\n        case 'account.expired':\r\n          error.alert.content = app.translator.trans(translationErrorsPrefix + code_error, {server: app.forum.attribute('yippy-auth-ldap.method_name')});\r\n          break;\r\n        case 'account.locked':\r\n          error.alert.content = app.translator.trans(translationErrorsPrefix + code_error, {server: app.forum.attribute('yippy-auth-ldap.method_name')});\r\n          break;\r\n        case 'domains.no_domains':\r\n          error.alert.content = app.translator.trans(translationErrorsPrefix + code_error);\r\n          break;\r\n        case 'domains.empty_host':\r\n          error.alert.content = app.translator.trans(translationErrorsPrefix + code_error, {domain_index: error.response.errors[0].domain_index});\r\n          break;\r\n        case 'domains.empty_base_dn':\r\n          error.alert.content = app.translator.trans(translationErrorsPrefix + code_error, {domain_index: error.response.errors[0].domain_index});\r\n          break;\r\n        case 'domains.empty_user_username':\r\n          error.alert.content = app.translator.trans(translationErrorsPrefix + code_error, {server: app.forum.attribute('yippy-auth-ldap.method_name'),\r\n          domain_index: error.response.errors[0].domain_index});\r\n          break;\r\n        case 'domains.empty_search_field':\r\n          error.alert.content = app.translator.trans(translationErrorsPrefix + code_error, {server: app.forum.attribute('yippy-auth-ldap.method_name'),\r\n          domain_index: error.response.errors[0].domain_index});\r\n          break;\r\n        case 'domains.username_field_does_not_exist':\r\n          error.alert.content = app.translator.trans(translationErrorsPrefix + code_error, {server: app.forum.attribute('yippy-auth-ldap.method_name'),\r\n          data: error.response.errors[0].data,\r\n          domain_index: error.response.errors[0].domain_index});\r\n          break;\r\n        case 'domains.mail_field_does_not_exist':\r\n          error.alert.content = app.translator.trans(translationErrorsPrefix + code_error, {server: app.forum.attribute('yippy-auth-ldap.method_name'),\r\n          data: error.response.errors[0].data,\r\n          domain_index: error.response.errors[0].domain_index});\r\n          break;\r\n        default:\r\n          \r\n      }\r\n    }\r\n    super.onerror(error);\r\n  }\r\n}\r\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","import { extend, override } from 'flarum/common/extend';\r\nimport app from 'flarum/common/app';\r\n\r\nimport HeaderSecondary from \"flarum/components/HeaderSecondary\";\r\nimport SettingsPage from \"flarum/components/SettingsPage\";\r\nimport Button from 'flarum/components/Button';\r\n\r\nimport LogInModal from \"flarum/components/LogInModal\";\r\nimport SignUpModal from \"flarum/components/SignUpModal\";\r\nimport LDAPLogInModal from \"./components/LDAPLogInModal\";\r\nimport Stream from 'flarum/utils/Stream';\r\nimport extractText from 'flarum/utils/extractText';\r\n\r\nconst translationPrefix = 'yippy-auth-ldap.forum.';\r\n\r\napp.initializers.add('yippy-auth-ldap', () => {\r\n  extend(HeaderSecondary.prototype, 'items', addLoginLink);\r\n  extend(HeaderSecondary.prototype, 'items', removeIfOnlyUse);\r\n  extend(LogInModal.prototype, 'content', overrideLogInModal);\r\n\r\n  extend(SignUpModal.prototype, 'fields', function (items) {\r\n    if (app.forum.attribute('displayNameDriver') === 'nickname' && this.isProvided('nickname')) {\r\n      this.nickname = Stream(this.attrs.nickname || '');\r\n\r\n      items.add(\r\n        'nickname',\r\n        <div className=\"Form-group\">\r\n          <input\r\n            className=\"FormControl\"\r\n            name=\"nickname\"\r\n            type=\"text\"\r\n            placeholder={extractText(app.translator.trans('flarum-nicknames.forum.sign_up.nickname_placeholder'))}\r\n            bidi={this.nickname}\r\n            disabled={this.loading || this.isProvided('nickname')}\r\n            required={app.forum.attribute('randomizeUsernameOnRegistration')}\r\n          />\r\n        </div>,\r\n        25\r\n      );\r\n    }\r\n  });\r\n\r\n  SignUpModal.prototype.title = function() {\r\n    if (this.attrs.isLDAP) {\r\n      return app.translator.trans(translationPrefix + 'account_found', {server: app.forum.attribute('yippy-auth-ldap.method_name')});\r\n    } else {\r\n      return app.translator.trans('core.forum.sign_up.title');\r\n    }\r\n  }\r\n\r\n  SignUpModal.prototype.footer = function() {\r\n    if (this.attrs.isLDAP) {\r\n      return [\r\n      ];\r\n    } else {\r\n      return [\r\n        <p className=\"SignUpModal-logIn\">{app.translator.trans('core.forum.sign_up.log_in_text', { a: <a onclick={this.logIn.bind(this)} /> })}</p>,\r\n      ];\r\n    }\r\n  }\r\n\r\n  extend(SettingsPage.prototype, 'accountItems', removeProfileActions);\r\n  extend(SettingsPage.prototype, 'settingsItems', checkRemoveAccountSection);\r\n\r\n\tfunction overrideLogInModal() {\r\n\t\tif (app.forum.attribute('yippy-auth-ldap.onlyUse')) {\r\n\t\t\tLogInModal.prototype.content = LDAPLogInModal.prototype.content\r\n\t\t\tLogInModal.prototype.title = LDAPLogInModal.prototype.title\r\n\t\t\tLogInModal.prototype.body = LDAPLogInModal.prototype.body\r\n\t\t\tLogInModal.prototype.fields = LDAPLogInModal.prototype.fields\r\n\t\t\tLogInModal.prototype.footer = LDAPLogInModal.prototype.footer\r\n\t\t\tLogInModal.prototype.onerror = LDAPLogInModal.prototype.onerror\r\n\t\t\tLogInModal.prototype.onready = LDAPLogInModal.prototype.onready\r\n\t\t\tLogInModal.prototype.onsubmit = LDAPLogInModal.prototype.onsubmit\r\n\t\t}\r\n\t}\r\n\r\n\tfunction addLoginLink(items) {\r\n\t\tif (items.has('logIn')) {\r\n\t\t\titems.add('logInLDAP',\r\n\t\t\t\tButton.component(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tclassName: 'Button Button--link',\r\n\t\t\t\t\t\tonclick: () => app.modal.show(LDAPLogInModal)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tapp.translator.trans(translationPrefix + 'log_in_with', {server: app.forum.attribute('yippy-auth-ldap.method_name')})\r\n\t\t\t\t),\r\n\t\t\t\t0\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction removeIfOnlyUse(items) {\r\n\t\tif (app.forum.attribute('yippy-auth-ldap.onlyUse')) {\r\n\t\t\tif (items.has('signUp')) {\r\n\t\t\t\titems.remove('signUp');\r\n\t\t\t}\r\n\t\t\tif (items.has('logIn')) {\r\n\t\t\t\titems.remove('logIn');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction removeProfileActions(items) {\r\n\t\titems.remove('changeEmail');\r\n\t\titems.remove('changePassword');\r\n\t}\r\n\r\n\tfunction checkRemoveAccountSection(items) {\r\n\t\tif (items.has('account') && items.get('account').children.length === 0) {\r\n\t\t\titems.remove('account');\r\n\t\t}\r\n\t}\r\n});\r\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","_extends","assign","bind","n","e","arguments","length","t","r","apply","_setPrototypeOf","setPrototypeOf","__proto__","translationErrorsPrefix","LDAPLogInModal","_Modal","create","constructor","_proto","oninit","vnode","this","identification","Stream","attrs","password","remember","className","title","app","trans","translationPrefix","server","attribute","content","m","body","footer","fields","toArray","items","ItemList","idLabel","passwordLabel","add","name","type","placeholder","bidi","disabled","loading","Button","onready","$","select","login","options","method","url","onsubmit","preventDefault","data","csrfToken","errorHandler","onerror","modifyText","modifyResponse","response","indexOf","replace","matches","match","JSON","parse","alert","controls","dismissible","status","errors","code","loaded","error","code_error","domain_index","Modal","extend","HeaderSecondary","has","onclick","show","remove","LogInModal","SignUpModal","isProvided","nickname","extractText","required","isLDAP","logIn","SettingsPage","children"],"sourceRoot":""}